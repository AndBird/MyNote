# 多进程

## 多进程描述
在Android中，虚拟机分配给各个进程的运行内存是有限制值的（这个值可以是32M，48M，64M等，根据机型而定），试想一下，如果在app中，增加了一个很常用的图
片选择模块用于上传图片或者头像，加载大量Bitmap会使app的内存占用迅速增加，如果你还把查看过的图片缓存在了内存中，那么OOM的风险将会大大增加，如果此时
还需要使用WebView加载一波网页，我就问你怕不怕！

微信，微博等主流app是如何解决这些问题的？微信移动开发团队在《Android内存优化杂谈》一文中就说到：“对于webview，图库等，由于存在内存系统泄露或者占用
内存过多的问题，我们可以采用单独的进程。微信当前也会把它们放在单独的tools进程中。

## 跨进程通信
#### Activity之间跨进程通信
把选择图片模块放到独立的进程，我们仍可以使用startActivityForResult方法，将选中的图片放到Bundle中，使用Intent传递即可

#### Activity与Service跨进程通信

#### 跨进程通讯的方式
* 四大组件间传递Bundle;

* 使用文件共享方式，多进程读写一个相同的文件，获取文件内容进行交互；

* 使用Messenger，一种轻量级的跨进程通讯方案，底层使用AIDL实现
Messenger也是使用AIDL实现的一种跨进程方式，Messenger顾名思义，就像是一种串行的消息机制，它是一种轻量级的IPC方案，可以在不同进程中传递Message对象，
我们在Message中放入需要传递的数据即可轻松实现进程间通讯。但是当我们需要调用服务端方法，或者存在并发请求，那么Messenger就不合适了。

* 使用AIDL(Android Interface Definition Language)，Android接口定义语言，用于定义跨进程通讯的接口；

* 使用ContentProvider，常用于多进程共享数据，比如系统的相册，音乐等，我们也可以通过ContentProvider访问到；

* 使用Socket传输数据。
